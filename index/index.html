<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LitVisual - Литература становится видимой</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8B5CF6;
            --primary-dark: #7C3AED;
            --primary-light: #A78BFA;
            --secondary: #EC4899;
            --accent: #06B6D4;
            --light: #F8FAFC;
            --dark: #1F2937;
            --success: #10B981;
            --gradient: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
            --gradient-light: linear-gradient(135deg, #A78BFA 0%, #F472B6 100%);
            --gradient-dark: linear-gradient(135deg, #7C3AED 0%, #DB2777 100%);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body {
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            background-color: #FDF4FF;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(139, 92, 246, 0.08) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(236, 72, 153, 0.08) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(6, 182, 212, 0.05) 0%, transparent 30%);
            z-index: -1;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        /* Header */
        header {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(139, 92, 246, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        .header-scrolled {
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.1);
            background: rgba(255, 255, 255, 0.98);
        }
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
            text-decoration: none;
            position: relative;
        }
        .logo::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 40px;
            height: 4px;
            background: var(--gradient);
            border-radius: 2px;
        }
        .logo-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 12px;
            color: white;
            font-size: 1.5rem;
        }
        .nav-links {
            display: flex;
            gap: 35px;
        }
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            font-size: 1.05rem;
            position: relative;
            padding: 5px 0;
            transition: color 0.3s;
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--gradient);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        .nav-links a:hover {
            color: var(--primary);
        }
        .nav-links a:hover::after {
            width: 100%;
        }
        .auth-buttons {
            display: flex;
            gap: 15px;
        }
        .btn {
            padding: 12px 28px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-guest {
            background: var(--gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }
        .btn-guest:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(139, 92, 246, 0.4);
            background: var(--gradient-dark);
        }
        /* Hero Section */
        .hero {
            padding: 200px 0 120px;
            position: relative;
            overflow: hidden;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: -100px;
            right: -100px;
            width: 500px;
            height: 500px;
            background: var(--gradient-light);
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            opacity: 0.1;
            animation: morph 20s infinite linear;
        }
        .hero::after {
            content: '';
            position: absolute;
            bottom: -100px;
            left: -100px;
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, var(--accent), var(--primary-light));
            border-radius: 70% 30% 30% 70% / 70% 70% 30% 30%;
            opacity: 0.1;
            animation: morph 25s infinite linear reverse;
        }
        @keyframes morph {
            0% { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
            25% { border-radius: 58% 42% 75% 25% / 76% 46% 54% 24%; }
            50% { border-radius: 50% 50% 33% 67% / 55% 27% 73% 45%; }
            75% { border-radius: 33% 67% 58% 42% / 63% 68% 32% 37%; }
            100% { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
        }
        .hero-content {
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        .hero h1 {
            font-size: 3.8rem;
            margin-bottom: 25px;
            font-weight: 800;
            line-height: 1.1;
        }
        .gradient-text {
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            display: inline-block;
            margin-bottom: 10px;
        }
        .hero p {
            font-size: 1.3rem;
            color: #4B5563;
            margin-bottom: 40px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 50px;
            flex-wrap: wrap;
        }
        .btn-primary {
            background: var(--gradient);
            color: white;
            padding: 18px 45px;
            font-size: 1.1rem;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.4);
            background: var(--gradient-dark);
        }
        .btn-secondary {
            background: white;
            border: 2px solid var(--primary-light);
            color: var(--primary);
            padding: 18px 45px;
            font-size: 1.1rem;
            border-radius: 16px;
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.1);
        }
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(139, 92, 246, 0.15);
            border-color: var(--primary);
        }
        /* Features */
        .features {
            padding: 120px 0;
            position: relative;
        }
        .section-title {
            text-align: center;
            margin-bottom: 80px;
        }
        .section-title h2 {
            font-size: 2.8rem;
            color: var(--dark);
            margin-bottom: 15px;
            font-weight: 800;
        }
        .section-title p {
            font-size: 1.2rem;
            color: #6B7280;
            max-width: 600px;
            margin: 0 auto;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }
        .feature-card {
            background: white;
            padding: 40px 35px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(139, 92, 246, 0.1);
        }
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
        }
        .feature-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 25px 50px rgba(139, 92, 246, 0.15);
        }
        .feature-icon {
            width: 90px;
            height: 90px;
            background: var(--gradient);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 2.2rem;
            transition: all 0.3s;
        }
        .feature-card:hover .feature-icon {
            transform: scale(1.1) rotate(5deg);
            border-radius: 25px;
        }
        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--dark);
        }
        .feature-card p {
            color: #6B7280;
            font-size: 1rem;
            line-height: 1.6;
        }
        /* How It Works */
        .how-it-works {
            padding: 120px 0;
            background: linear-gradient(135deg, #FDF4FF 0%, #F0E7FF 100%);
            border-radius: 0 0 100px 100px;
            position: relative;
            overflow: hidden;
        }
        .how-it-works::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 300px;
            background: var(--gradient);
            border-radius: 50%;
            opacity: 0.05;
            transform: translate(30%, -30%);
        }
        .steps {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            position: relative;
            flex-wrap: wrap;
        }
        .steps::before {
            content: '';
            position: absolute;
            top: 60px;
            left: 10%;
            width: 80%;
            height: 4px;
            background: var(--gradient);
            z-index: 1;
            border-radius: 2px;
        }
        .step {
            text-align: center;
            position: relative;
            z-index: 2;
            flex: 1;
            min-width: 300px;
            margin-bottom: 40px;
        }
        .step-number {
            width: 100px;
            height: 100px;
            background: white;
            border: 4px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            margin: 0 auto 25px;
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.2);
            position: relative;
        }
        .step-number::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: var(--gradient);
            border-radius: 50%;
            z-index: -1;
            opacity: 0.2;
        }
        .step h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--dark);
        }
        .step p {
            color: #6B7280;
            max-width: 300px;
            margin: 0 auto;
        }
        /* Pricing */
        .pricing {
            padding: 120px 0;
            position: relative;
        }
        .pricing::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 300px;
            height: 300px;
            background: var(--gradient);
            border-radius: 50%;
            opacity: 0.05;
            transform: translate(-30%, 30%);
        }
        .pricing-cards {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: nowrap;
            max-width: 900px;
            margin: 0 auto;
        }
        @media (max-width: 900px) {
            .pricing-cards {
                flex-wrap: wrap;
            }
        }
        .pricing-card {
            background: white;
            border-radius: 25px;
            padding: 40px 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
            text-align: center;
            flex: 1;
            min-width: 300px;
            max-width: 420px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        .pricing-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: var(--gradient);
        }
        .pricing-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 40px 80px rgba(139, 92, 246, 0.15);
        }
        .pricing-card.popular {
            transform: scale(1.05);
            border: 2px solid var(--primary);
            box-shadow: 0 30px 70px rgba(139, 92, 246, 0.2);
        }
        .pricing-card.popular:hover {
            transform: scale(1.05) translateY(-10px);
        }
        .popular-badge {
            position: absolute;
            top: 20px;
            right: -30px;
            background: var(--secondary);
            color: white;
            padding: 8px 40px;
            font-size: 0.9rem;
            font-weight: 700;
            transform: rotate(45deg);
            box-shadow: 0 5px 15px rgba(236, 72, 153, 0.3);
        }
        .price {
            font-size: 3.2rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0 10px;
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }
        .price span {
            font-size: 1.1rem;
            color: #6B7280;
            font-weight: 500;
            margin-top: 12px;
        }
        .pricing-features {
            list-style: none;
            margin: 30px 0;
            text-align: left;
        }
        .pricing-features li {
            padding: 10px 0;
            border-bottom: 1px solid #F3F4F6;
            display: flex;
            align-items: center;
        }
        .pricing-features li i {
            margin-right: 12px;
            font-size: 1.1rem;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .fa-check-circle {
            color: var(--success);
        }
        .fa-times-circle {
            color: #EF4444;
        }
        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--dark) 0%, #111827 100%);
            color: white;
            padding: 80px 0 30px;
            border-radius: 100px 100px 0 0;
            position: relative;
            overflow: hidden;
        }
        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
        }
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 50px;
            margin-bottom: 60px;
        }
        .footer-logo {
            font-size: 2.2rem;
            font-weight: 800;
            color: white;
            margin-bottom: 25px;
            display: inline-block;
        }
        .footer-logo span {
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .footer-links h3 {
            margin-bottom: 25px;
            font-size: 1.4rem;
            color: white;
            position: relative;
            display: inline-block;
        }
        .footer-links h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--gradient);
            border-radius: 3px;
        }
        .footer-links ul {
            list-style: none;
        }
        .footer-links li {
            margin-bottom: 12px;
        }
        .footer-links a {
            color: #D1D5DB;
            text-decoration: none;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }
        .footer-links i {
            color: var(--primary-light);
            font-size: 0.9rem;
        }
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        .social-icon {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        .social-icon:hover {
            background: var(--gradient);
            transform: translateY(-5px);
        }
        .copyright {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #9CA3AF;
            font-size: 0.95rem;
        }
        /* CTA Section */
        .cta {
            padding: 100px 0;
            background: var(--gradient);
            border-radius: 50px;
            margin: 0 20px 100px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .cta::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        .cta::after {
            content: '';
            position: absolute;
            bottom: -80px;
            left: -80px;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }
        .cta h2 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        .cta p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 40px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        .btn-cta {
            background: white;
            color: var(--primary);
            padding: 18px 50px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 1;
        }
        .btn-cta:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        /* Responsive */
        @media (max-width: 1100px) {
            .steps::before {
                display: none;
            }
            .step {
                min-width: 100%;
                margin-bottom: 60px;
            }
            .pricing-cards {
                flex-wrap: wrap;
                gap: 30px;
            }
            .pricing-card {
                min-width: 100%;
                max-width: 500px;
            }
            .pricing-card.popular {
                transform: none;
            }
            .pricing-card.popular:hover {
                transform: translateY(-15px);
            }
        }
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.8rem;
            }
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            .btn {
                width: 100%;
                max-width: 350px;
            }
            .nav-links {
                display: none;
            }
            .features-grid {
                grid-template-columns: 1fr;
            }
            .cta {
                margin: 0 10px 80px;
                padding: 70px 20px;
                border-radius: 30px;
            }
            .cta h2 {
                font-size: 2.2rem;
            }
        }
        /* Floating shapes */
        .floating-shape {
            position: absolute;
            border-radius: 50%;
            background: var(--gradient);
            opacity: 0.1;
            z-index: -1;
        }
        .shape-1 {
            width: 150px;
            height: 150px;
            top: 15%;
            left: 5%;
            animation: float 20s infinite ease-in-out;
        }
        .shape-2 {
            width: 100px;
            height: 100px;
            bottom: 20%;
            right: 8%;
            animation: float 25s infinite ease-in-out reverse;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        /* Стили для скрытых разделов */
        .page-section {
            display: none;
            padding: 120px 0;
            min-height: 100vh;
        }
        .page-section.active {
            display: block;
        }
        /* Личный кабинет (гостевой) */
        .dashboard-header {
            background: white;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .subscription-status {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 8px 20px;
            background: #F3F4F6;
            color: var(--dark);
            border-radius: 50px;
            font-weight: 600;
            margin-top: 15px;
        }
        .welcome-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        .dashboard-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            text-decoration: none;
            color: var(--dark);
            transition: transform 0.3s;
            border: 2px solid transparent;
            cursor: pointer;
        }
        .dashboard-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-light);
        }
        .card-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        /* Библиотека */
        .library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .search-box {
            width: 300px;
            padding: 12px 20px;
            border: 2px solid #E5E7EB;
            border-radius: 10px;
            font-size: 1rem;
        }
        .category-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .category-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .category-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        .books-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }
        .book-item {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        .book-item:hover {
            transform: translateY(-10px);
        }
        .book-cover {
            height: 200px;
            background: linear-gradient(135deg, #8B5CF6, #A78BFA);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            position: relative;
        }
        .book-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        .book-info {
            padding: 25px;
        }
        .book-meta {
            color: #6B7280;
            font-size: 0.9rem;
            margin: 10px 0;
        }
        .book-difficulty {
            display: inline-block;
            padding: 5px 10px;
            background: #F3F4F6;
            border-radius: 5px;
            font-size: 0.8rem;
            margin-top: 10px;
        }
        .read-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s;
        }
        .read-btn:hover {
            background: var(--primary-dark);
        }
        /* Читалка */
        .reader-container {
            display: flex;
            height: calc(100vh - 80px);
            margin-top: 80px;
        }
        .reader-sidebar {
            width: 300px;
            background: white;
            border-right: 1px solid #E5E7EB;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s;
        }
        .reader-sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #E5E7EB;
        }
        .reader-nav {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }
        .reader-nav-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: background 0.3s;
            border-left: 4px solid transparent;
        }
        .reader-nav-item:hover, .reader-nav-item.active {
            background: #FAF5FF;
            border-left-color: var(--primary);
        }
        .reader-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #FAF5FF;
        }
        .reader-header {
            padding: 20px 30px;
            background: white;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .reader-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .reader-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .reader-control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #E5E7EB;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .reader-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            line-height: 1.8;
            font-size: 1.1rem;
        }
        .materials-modal {
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 30px rgba(0,0,0,0.1);
            transform: translateX(100%);
            transition: transform 0.3s;
            z-index: 1000;
            padding: 30px;
            overflow-y: auto;
        }
        .materials-modal.active {
            transform: translateX(0);
        }
        .highlighted-word {
            background: #FEF3C7;
            border-bottom: 1px dashed #F59E0B;
            cursor: help;
            position: relative;
        }
        .tooltip {
            position: absolute;
            background: var(--dark);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            max-width: 300px;
            z-index: 1000;
            display: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .navigation-arrows {
            display: flex;
            justify-content: space-between;
            padding: 20px 30px;
            background: white;
            border-top: 1px solid #E5E7EB;
        }
        .nav-arrow {
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        .nav-arrow:disabled {
            background: #9CA3AF;
            cursor: not-allowed;
        }
        /* Кнопка возврата */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: transparent;
            border: 2px solid var(--primary);
            border-radius: 8px;
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
        }
        /* Улучшенные стили для разделов функций */
        .function-section {
            padding: 40px;
            background: white;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 1px solid rgba(139, 92, 246, 0.1);
        }
        .function-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .function-section h3 i {
            color: var(--secondary);
        }
        .function-content {
            line-height: 1.8;
            color: #4B5563;
        }
        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .function-item {
            background: #FAF5FF;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        .function-item h4 {
            color: var(--dark);
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- Floating shapes -->
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <!-- Главная страница (активна по умолчанию) -->
    <div id="mainPage" class="page-section active">
        <!-- Header -->
        <header id="mainHeader">
            <div class="container nav-container">
                <a href="#" class="logo" onclick="showPage('mainPage')">
                    <div class="logo-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    LitVisual
                </a>
                <nav class="nav-links">
                    <a href="#features" onclick="scrollToSection('features')">Преимущества</a>
                    <a href="#how-it-works" onclick="scrollToSection('how-it-works')">Как работает</a>
                    <a href="#pricing" onclick="scrollToSection('pricing')">Тарифы</a>
                </nav>
                <div class="auth-buttons">
                    <button class="btn btn-guest" id="guestBtn">
                        <i class="fas fa-user"></i> Войти как гость
                    </button>
                </div>
            </div>
        </header>
        <!-- Hero Section -->
        <section class="hero">
            <div class="container hero-content">
                <h1><span class="gradient-text">Литература становится видимой</span></h1>
                <p>Интерактивная платформа для изучения школьной литературы через визуальные конспекты, исторический контекст и глубокий анализ произведений. Учиться интересно!</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" id="startFreeBtn">
                        <i class="fas fa-play-circle"></i> Попробовать бесплатно
                    </button>
                    <button class="btn btn-secondary" id="learnMoreBtn">
                        <i class="fas fa-info-circle"></i> Узнать больше
                    </button>
                </div>
            </div>
        </section>
        <!-- Features -->
        <section class="features" id="features">
            <div class="container">
                <div class="section-title">
                    <h2>Почему LitVisual?</h2>
                    <p>Мы превращаем сложные литературные произведения в увлекательные интерактивные материалы</p>
                </div>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3>Визуальные конспекты</h3>
                        <p>Схемы персонажей, таймлайны событий и инфографика вместо скучных текстовых конспектов</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <h3>Исторический контекст</h3>
                        <p>Погружение в эпоху произведения: политика, культура, быт того времени</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Интерактивные персонажи</h3>
                        <p>Карточки героев с анализом характеров, мотиваций и взаимоотношений</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Подготовка к урокам литературы</h3>
                        <p>Тренировочные тесты, разборы ключевых эпизодов, полезные материалы к уроку</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-film"></i>
                        </div>
                        <h3>Экранизации</h3>
                        <p>Подборки фильмов и сериалов по произведениям с сравнительным анализом</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3>Доступ везде</h3>
                        <p>Учитесь на компьютере, планшете или телефоне с синхронизацией прогресса</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- How It Works -->
        <section class="how-it-works" id="how-it-works">
            <div class="container">
                <div class="section-title">
                    <h2>Как это работает?</h2>
                    <p>Всего 3 шага до глубокого понимания литературы</p>
                </div>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>Выберите книгу</h3>
                        <p>Из школьной программы или для саморазвития</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>Изучайте с материалами</h3>
                        <p>Читайте с интерактивными подсказками, схемами и контекстом</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>Закрепляйте знания</h3>
                        <p>Проходите тесты, создавайте конспекты, готовьтесь к урокам</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Pricing -->
        <section class="pricing" id="pricing">
            <div class="container">
                <div class="section-title">
                    <h2>Выберите подписку</h2>
                    <p>Начните бесплатно, переходите на премиум когда будете готовы</p>
                </div>
                <div class="pricing-cards">
                    <div class="pricing-card">
                        <h3>Бесплатный доступ</h3>
                        <div class="price">0 ₽ <span>/ навсегда</span></div>
                        <ul class="pricing-features">
                            <li><i class="fas fa-check-circle"></i> Доступ к 3 произведениям</li>
                            <li><i class="fas fa-check-circle"></i> Базовые схемы персонажей</li>
                            <li><i class="fas fa-check-circle"></i> Один тест на произведение</li>
                            <li><i class="fas fa-check-circle"></i> Ограниченный исторический контекст</li>
                            <li><i class="fas fa-times-circle"></i> <del>Полная библиотека</del></li>
                            <li><i class="fas fa-times-circle"></i> <del>Все интерактивные материалы</del></li>
                        </ul>
                        <button class="btn btn-secondary" id="startFreeBtn2">
                            <i class="fas fa-play"></i> Начать бесплатно
                        </button>
                    </div>
                    <div class="pricing-card popular">
                        <div class="popular-badge">ПОПУЛЯРНЫЙ</div>
                        <h3>Премиум</h3>
                        <div class="price">149 ₽ <span>/ месяц</span></div>
                        <ul class="pricing-features">
                            <li><i class="fas fa-check-circle"></i> <strong>Полный доступ ко всей библиотеке</strong></li>
                            <li><i class="fas fa-check-circle"></i> Все интерактивные схемы и конспекты</li>
                            <li><i class="fas fa-check-circle"></i> Неограниченное количество тестов</li>
                            <li><i class="fas fa-check-circle"></i> Подробный исторический и культурный контекст</li>
                            <li><i class="fas fa-check-circle"></i> Доступ к экранизациям</li>
                            <li><i class="fas fa-check-circle"></i> Поддержка 24/7 и регулярные обновления</li>
                        </ul>
                        <button class="btn btn-primary" id="buyPremiumBtn">
                            <i class="fas fa-crown"></i> Купить подписку
                        </button>
                    </div>
                </div>
            </div>
        </section>
        <!-- CTA Section -->
        <section class="cta">
            <div class="container">
                <h2>Готовы погрузиться в мир литературы?</h2>
                <p>Начните изучать произведения школьной программы по-новому уже сегодня</p>
                <button class="btn btn-cta" id="ctaBtn">
                    <i class="fas fa-bolt"></i> Начать изучение сейчас
                </button>
            </div>
        </section>
        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div>
                        <div class="footer-logo">Lit<span>Visual</span></div>
                        <p style="color: #D1D5DB; margin-bottom: 25px;">Интерактивная платформа для изучения литературы. Делаем сложное - понятным, скучное - интересным.</p>
                        <div class="social-icons">
                            <a href="https://t.me/marvsi_1" target="_blank" class="social-icon" title="Telegram">
                                <i class="fab fa-telegram"></i>
                            </a>
                            <a href="#" class="social-icon"><i class="fab fa-vk"></i></a>
                            <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                    <div class="footer-links">
                        <h3>Платформа</h3>
                        <ul>
                            <li><a href="#features" onclick="scrollToSection('features')"><i class="fas fa-chevron-right"></i> Преимущества</a></li>
                            <li><a href="#how-it-works" onclick="scrollToSection('how-it-works')"><i class="fas fa-chevron-right"></i> Как это работает</a></li>
                            <li><a href="#pricing" onclick="scrollToSection('pricing')"><i class="fas fa-chevron-right"></i> Тарифы</a></li>
                        </ul>
                    </div>
                    <div class="footer-links">
                        <h3>Поддержка</h3>
                        <ul>
                            <li><a href="#"><i class="fas fa-chevron-right"></i> Помощь</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right"></i> FAQ</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right"></i> Политика конфиденциальности</a></li>
                        </ul>
                    </div>
                    <div class="footer-links">
                        <h3>Контакты</h3>
                        <ul>
                            <li>
                                <a href="https://t.me/marvsi_1" target="_blank">
                                    <i class="fab fa-telegram"></i> @marvsi_1
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="copyright">
                    <p>&copy; 2025 LitVisual. Все права защищены.</p>
                </div>
            </div>
        </footer>
    </div>
    <!-- Личный кабинет (гостевой режим) -->
    <div id="accountPage" class="page-section">
        <header class="dashboard-header">
            <div class="container nav-container">
                <a href="#" class="logo" onclick="showPage('mainPage')">
                    <div class="logo-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    LitVisual
                </a>
                <div class="user-menu">
                    <div class="user-info">
                        <div class="user-avatar">Г</div>
                        <span>Гость</span>
                    </div>
                </div>
            </div>
        </header>
        <div class="container">
            <div class="welcome-section">
                <h1>Добро пожаловать, Гость!</h1>
                <p>Вы зашли в гостевом режиме. Доступны только базовые функции.</p>
                <div class="subscription-status">
                    <i class="fas fa-user-clock"></i>
                    <span>Гостевой режим</span>
                </div>
            </div>
            <h2>Быстрый доступ</h2>
            <div class="dashboard-grid">
                <div class="dashboard-card" onclick="showPage('libraryPage')">
                    <div class="card-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Библиотека</h3>
                    <p>Выберите книгу для изучения</p>
                </div>
                <div class="dashboard-card" onclick="showPage('mainPage'); setTimeout(() => scrollToSection('pricing'), 100)">
                    <div class="card-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <h3>Тарифы</h3>
                    <p>Перейти на премиум</p>
                </div>
                <div class="dashboard-card">
                    <div class="card-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3>Поддержка</h3>
                    <p>Помощь и FAQ</p>
                </div>
            </div>
            <h2 style="margin-top: 50px;">Рекомендуемые книги</h2>
            <div class="features-grid">
                <div class="feature-card" onclick="openBook('dead-souls')">
                    <div class="feature-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Мёртвые души</h3>
                    <p>Н.В. Гоголь</p>
                </div>
                <div class="feature-card" onclick="openBook('crime-and-punishment')">
                    <div class="feature-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Преступление и наказание</h3>
                    <p>Ф.М. Достоевский</p>
                </div>
                <div class="feature-card" onclick="openBook('death-of-a-clerk')">
                    <div class="feature-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Смерть чиновника</h3>
                    <p>А.П. Чехов</p>
                </div>
            </div>
        </div>
    </div>
    <!-- Библиотека -->
    <div id="libraryPage" class="page-section">
        <header class="dashboard-header">
            <div class="container nav-container">
                <a href="#" class="logo" onclick="showPage('mainPage')">
                    <div class="logo-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    LitVisual
                </a>
                <div class="user-menu">
                    <button class="back-btn" onclick="showPage('accountPage')">
                        <i class="fas fa-arrow-left"></i> Назад в кабинет
                    </button>
                </div>
            </div>
        </header>
        <div class="container" style="padding-top: 40px;">
            <div class="library-header">
                <h1>Библиотека произведений</h1>
                <input type="text" class="search-box" placeholder="Поиск по названию или автору...">
            </div>
            <div class="category-filters">
                <button class="category-btn active" data-category="all">Все книги</button>
                <button class="category-btn" data-category="9">9 класс</button>
                <button class="category-btn" data-category="10">10 класс</button>
                <button class="category-btn" data-category="11">11 класс</button>
                <button class="category-btn" data-category="russian">Русская классика</button>
            </div>
            <div class="books-container" id="booksContainer">
                <!-- Книги будут загружаться здесь -->
            </div>
        </div>
    </div>
    <!-- Читалка -->
    <div id="readerPage" class="page-section">
        <div class="reader-container">
            <!-- Sidebar -->
            <aside class="reader-sidebar" id="readerSidebar">
                <div class="reader-sidebar-header">
                    <button class="back-btn" onclick="showPage('libraryPage')">
                        <i class="fas fa-arrow-left"></i> Библиотека
                    </button>
                </div>
                <div class="reader-nav">
                    <div class="reader-nav-item active" data-section="reading">
                        <i class="fas fa-book-open"></i>
                        <span>Чтение книги</span>
                    </div>
                    <div class="reader-nav-item" data-section="characters">
                        <i class="fas fa-users"></i>
                        <span>Персонажи</span>
                    </div>
                    <div class="reader-nav-item" data-section="history">
                        <i class="fas fa-landmark"></i>
                        <span>Исторический контекст</span>
                    </div>
                    <div class="reader-nav-item" data-section="culture">
                        <i class="fas fa-theater-masks"></i>
                        <span>Культурный код</span>
                    </div>
                    <div class="reader-nav-item" data-section="schemes">
                        <i class="fas fa-project-diagram"></i>
                        <span>Схемы взаимодействий</span>
                    </div>
                    <div class="reader-nav-item" data-section="episodes">
                        <i class="fas fa-star"></i>
                        <span>Ключевые эпизоды</span>
                    </div>
                    <div class="reader-nav-item" data-section="movies">
                        <i class="fas fa-film"></i>
                        <span>Экранизации</span>
                    </div>
                    <div class="reader-nav-item" data-section="tests">
                        <i class="fas fa-question-circle"></i>
                        <span>Тесты и квизы</span>
                    </div>
                </div>
            </aside>
            <!-- Main Content -->
            <main class="reader-main">
                <header class="reader-header">
                    <div>
                        <h1 class="reader-title" id="bookTitle">Евгений Онегин</h1>
                        <p id="bookChapter">Глава первая</p>
                    </div>
                    <div class="reader-controls">
                        <button class="reader-control-btn" onclick="changeFontSize(-1)">
                            <i class="fas fa-minus"></i>
                        </button>
                        <span id="fontSize">18px</span>
                        <button class="reader-control-btn" onclick="changeFontSize(1)">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="reader-control-btn" onclick="toggleDarkMode()">
                            <i class="fas fa-moon"></i>
                        </button>
                        <button class="reader-control-btn" onclick="toggleSidebar()">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </header>
                <div class="reader-content" id="readerContent">
                    <!-- Содержимое будет загружаться динамически -->
                </div>
                <div class="navigation-arrows">
                    <button class="nav-arrow" id="prevChapterBtn" onclick="prevChapter()">← Предыдущая глава</button>
                    <button class="nav-arrow" id="nextChapterBtn" onclick="nextChapter()">Следующая глава →</button>
                </div>
            </main>
            <!-- Модальное окно материалов -->
            <div class="materials-modal" id="materialsModal">
                <div class="reader-sidebar-header">
                    <button onclick="closeMaterials()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="materialsContent">
                    <!-- Содержимое будет загружаться динамически -->
                </div>
            </div>
        </div>
    </div>
    <script>
        // ==================== Полные тексты книг с пояснениями ====================
        const bookTexts = {
            'dead-souls': {
                title: 'Мёртвые души',
                author: 'Н.В. Гоголь',
                class: '10',
                isRussian: true,
                chapters: [
                    {
                        title: 'Глава первая',
                        content: `<p>В ворота гостиницы губернского города NN въехала довольно красивая рессорная небольшая <span class="highlighted-word" data-word="бричка">бричка</span>, в какой ездят холостяки: отставные подполковники, штабс-капитаны, помещики, имеющие около сотни душ крестьян, — словом, все те, которых называют господами средней руки. В бричке сидел господин, не красавец, но и не дурной наружности, ни слишком толст, ни слишком тонок; нельзя сказать, чтобы стар, однако ж и не так чтобы слишком молод. Въезд его не произвел в городе совершенно никакого шума и не был сопровожден ничем особенным; только два русские мужика, стоявшие у дверей кабака против гостиницы, сделали кое-какие замечания, относившиеся, впрочем, более к экипажу, чем к сидевшему в нем. «Вишь ты, — сказал один другому, — вон какое колесо! что ты думаешь, доедет то колесо, если б случилось, в Москву или не доедет?» — «Доедет», — отвечал другой. «А в Казань-то, я думаю, не доедет?» — «В Казань не доедет», — отвечал другой. Этим разговор и кончился. Да еще, когда бричка подъехала к гостинице, встретился молодой человек в белых <span class="highlighted-word" data-word="канифасовых">канифасовых</span> панталонах, весьма узких и коротких, во фраке с покушеньями на моду, из-под которого видна была манишка, застегнутая тульскою булавкою с бронзовым пистолетом. Молодой человек оборотился назад, посмотрел экипаж, придержал рукою картуз, чуть не слетевший от ветра, и пошел своей дорогой.</p>
<p>Когда экипаж въехал на двор, господин был встречен трактирным слугою, или половым, как их называют в русских трактирах, живым и вертлявым до такой степени, что даже нельзя было рассмотреть, какое у него было лицо. Он выбежал проворно, с салфеткой в руке, весь длинный и в длинном <span class="highlighted-word" data-word="демикотонном">демикотонном</span> сюртуке со спинкою чуть не на самом затылке, встряхнул волосами и повел проворно господина вверх по всей деревянной галдарее показывать ниспосланный ему Богом покой. Покой был известного рода, ибо гостиница была тоже известного рода, то есть именно такая, как бывают гостиницы в губернских городах, где за два рубля в сутки проезжающие получают покойную комнату с тараканами, выглядывающими, как чернослив, из всех углов, и дверью в соседнее помещение, всегда заставленную комодом, где устроивается сосед, молчаливый и спокойный человек, но чрезвычайно любопытный, интересующийся знать о всех подробностях проезжающего. Наружный фасад гостиницы отвечал ее внутренности: она была очень длинна, в два этажа; нижний не был выщекатурен и оставался в темно-красных кирпичиках, еще более потемневших от лихих погодных перемен и грязноватых уже самих по себе; верхний был выкрашен вечною желтою краскою; внизу были лавочки с хомутами, веревками и баранками. В угольной из этих лавочек, или, лучше, в окне, помещался <span class="highlighted-word" data-word="сбитенщик">сбитенщик</span> с самоваром из красной меди и лицом так же красным, как самовар, так что издали можно было бы подумать, что на окне стояло два самовара, если б один самовар не был с черною как смоль бородою.</p>
<p>Пока слуга рассматривал вновь приехавшего, рассматривал его багаж, вводил его в комнату, пока он расправлял свои члены, отвыкшие от дороги, господин успел сбегать вниз и спросить себе обедать. Пока ему приносили разные обычные в трактирах блюда, как-то: щи с слоеным пирожком, нарочно сберегаемым для проезжающих в течение нескольких неделей, мозги с горошком, сосиски с капустой, пулярку жареную, огурец соленый и вечный слоеный сладкий пирожок, всегда готовый к услугам; пока все это приносилось ему на теплых и холодных блюдах, он заставил слугу, или полового, рассказывать всякий вздор, — о том, кто прежде содержал эту гостиницу, и кто теперь, и много ли дает доходу, и большой ли подлец их хозяин; на что половой, по обыкновению, отвечал: «О, большой, сударь, плут и мошенник». Как и в просвещенной Европе, так и в просвещенной России есть теперь очень много почтенных людей, которые без полового не могут покушать в трактире и непременно должны поговорить с ним, а иногда даже и посмеяться над ним забавно. Впрочем, не все были пустые вопросы: он расспросил с подробностью, кто в городе губернатор, кто председатель палаты, кто прокурор, — словом, не пропустил ни одного значительного чиновника; но с еще большею подробностью расспросил о всех значительных помещиках: сколько у кого душ крестьян, как далеко живет от города, какого характера и как часто приезжает в город; расспросил внимательно о состоянии края: не было ли каких болезней в их губернии — повальных горячек, убийственных каких-нибудь лихорадок, оспы и тому подобного, и все так обстоятельно и с такою точностью, которая показывала более, чем одно простое любопытство. В приеме своем господин имел что-то солидное и высмаркивался чрезвычайно громко. Неизвестно, как он это делал, но только нос его звучал, как труба. Это достоинство, впрочем, приобрело ему полное уважение со стороны трактирного слуги, так что всякий раз, когда он слышал этот звук, встряхивал волосами, спрашивал почтительнее и, наклоняя голову с высоты, осведомлялся: не нужно ли чего? После обеда господин выпил чашку кофе и сел на диван, подложив себе за спину подушку, которую в русских трактирах вместо эластической шерсти набивают чем-то чрезвычайно похожим на кирпич и булыжник. Тут начал он зевать и приказал отвести себя в свой нумер, где, прилегши, заснул два часа. Отдохнувши, он написал на лоскутке бумажки, по требованию трактирного слуги, чин, имя и фамилию для сообщения куда следует, в полицию. На лоскутке слуга, спускаясь с лестницы, прочел по складам: «Коллежский советник Павел Иванович Чичиков, помещик, по своим надобностям». Пока слуга еще разбирал по складам записку, сам Павел Иванович Чичиков отправился посмотреть город, которым остался, как казалось, доволен, ибо нашел, что город никак не уступал другим губернским городам: сильно била в глаза желтая краска на каменных домах и скромно темнела серая на деревянных. Домы были в один, два и полтора этажа, с вечным мезонином, очень красивым, по мнению губернских архитекторов. Местами эти дома казались затерянными среди широкой, как поле, улицы и нескончаемых деревянных заборов; местами сбивались в кучу, и здесь было заметно более движения народа и живости. Попадались почти смытые дождем вывески с кренделями и сапогами, кое-где с нарисованными синими брюками и подписью какого-то Аршавского портного; где магазин с картузами, фуражками и надписью: «Иностранец Василий Федоров»; где нарисован бильярд с двумя игроками во фраках, в какие одеваются у нас на театрах гости, являющиеся в последнем акте. Игроки были изображены с прицеливающимися киями, несколько вывороченными назад руками и косыми ногами, только что сделавшими на воздухе антраша. Под всем этим было написано: «И вот заведение». Кое-где просто на улицах стояли столы с орехами, мылом и пряниками, похожими на мыло; где трактир с нарисованною толстою рыбою и воткнутою в нее вилкою. Чаще же всего заметно было потемневших двуглавых государственных орлов, которые теперь уже заменены лаконическою надписью: «Питейный дом». Мостовая везде была плоховата. Он заглянул и в городской сад, который состоял из тоненьких дерев, дурно принявшихся, с подпорками внизу, в виде треугольников, очень красиво выкрашенных зеленою масляною краскою. Впрочем, хотя эти деревца были не выше тростника, о них было сказано в газетах при описании иллюминации, что «город наш украсился, благодаря попечениям гражданского правителя, садом, состоящим из тенистых, широковетвистых дерев, дающих прохладу в знойный день», и что при этом «было весьма умилительно глядеть, как сердца граждан трепетали в избытке благодарности и лили потоки слез в знак признательности к господину градоначальнику». Расспросивши подробно будочника, куда можно пройти ближе, если нужно пройти в собор, в присутственные места, к губернатору, он отправился взглянуть на реку, протекавшую посредине города, дорогою сорвал афишу, чтобы, пришедши домой, прочитать ее хорошенько, посмотрел пристально на какую-то даму недурной наружности, шедшую по деревянному тротуару, за нею следовавшего мальчика в военной ливрее, с узелком в руке, и, еще раз окинувши все глазами, как будто бы с тем, чтобы хорошо запомнить положение места, отправился прямо домой, в свой нумер, поддерживаемый слегка на лестнице трактирным слугою. Наевшись чаю, он уселся перед столом, велел подать себе свечу, вынул из кармана афишу, поднес ее к свече и стал читать, прищуря немного правый глаз. Впрочем, замечательного немного было в афише: давалась драма г. Коцебу, в которой Роллу играл г. Попльвин, Кору — девица Зяблова, прочие лица были и того менее замечательны; однако же он прочел их всех, добрался даже до цены партера и узнал, что афиша была напечатана в типографии губернского правления, потом перевернул на другую сторону: чтобы узнать, нет ли и там чего-нибудь, но, не найдши ничего, протер глаза, свернул опрятно и положил в свой ларчик, куда имел обыкновение складывать все, что ни попадалось. День, кажется, был заключен порцией холодной телятины, бутылкою кислых щей и крепким сном во всю насосную завертку, как выражаются в иных местах обширного русского государства.</p>`
                    }
                ],
                materials: {
                    characters: `<div class="function-section">
    <h3><i class="fas fa-users"></i> Основные персонажи "Мёртвых душ"</h3>
    <div class="function-content">
        <div class="function-grid">
            <div class="function-item">
                <h4>Павел Иванович Чичиков</h4>
                <p>Главный герой, бывший чиновник, скупающий "мёртвые души"</p>
            </div>
            <div class="function-item">
                <h4>Манилов</h4>
                <p>Помещик-мечтатель, первый, кого посетил Чичиков</p>
            </div>
            <div class="function-item">
                <h4>Собакевич</h4>
                <p>Крепкий и расчётливый землевладелец</p>
            </div>
            <div class="function-item">
                <h4>Коробочка</h4>
                <p>Вдова, бережливая помещица</p>
            </div>
            <div class="function-item">
                <h4>Ноздрёв</h4>
                <p>Буйный и неугомонный помещик, игрок и враль</p>
            </div>
            <div class="function-item">
                <h4>Плюшкин</h4>
                <p>Скупой и жадный помещик, скряга, последний в пути Чичикова</p>
            </div>
        </div>
    </div>
</div>`,
                    history: `<div class="function-section">
    <h3><i class="fas fa-landmark"></i> Исторический контекст "Мёртвых душ"</h3>
    <div class="function-content">
        <p>Произведение написано в 1830-х годах. В России существовала крепостная система, где помещики владели крестьянами.</p>
        <p><strong>Ревизские сказки</strong> — официальные документы, где переписывались все души (люди) каждые 10-15 лет. Между переписями души умирали, но налоги платились со всего количества, записанного при последней ревизии.</p>
        <p>Чичиков покупал "мёртвые души", чтобы заложить их как живые в Опекунский совет и получить кредит.</p>
    </div>
</div>`,
                    culture: `<div class="function-section">
    <h3><i class="fas fa-theater-masks"></i> Культурный код</h3>
    <div class="function-content">
        <p>Гоголь создал художественный образ эпохи: бюрократия, провинциальное общество, нравы помещиков.</p>
        <p>Поэма — сатира на русскую действительность, которая подвергает критике социальные и нравственные явления России XIX века.</p>
        <p>"Душа" — духовное начало человека, а также единица податного населения в России того времени.</p>
    </div>
</div>`,
                    schemes: `<div class="function-section">
    <h3><i class="fas fa-project-diagram"></i> Путь Чичикова: последовательность посещения помещиков</h3>
    <div class="function-content">
        <div style="background: linear-gradient(135deg, #8B5CF6, #A78BFA); padding: 20px; border-radius: 10px; color: white; margin: 15px 0;">
            <ol style="margin: 0; padding-left: 20px; font-size: 1.1rem; line-height: 1.8;">
                <li><strong>Манилов</strong> — мечтатель и фантазёр, живёт в имении "Маниловка"</li>
                <li><strong>Коробочка</strong> — пожилая вдова-помещица, бережливая и подозрительная</li>
                <li><strong>Ноздрёв</strong> — буйный помещик, игрок и враль, живёт в имении "Ноздрёвка"</li>
                <li><strong>Собакевич</strong> — крепкий хозяин, практичный и расчётливый</li>
                <li><strong>Плюшкин</strong> — последний помещик, скупой до абсурда, живущий в полном запустении</li>
            </ol>
        </div>
        <p>Каждый помещик представляет определённый человеческий тип и социальный порок.</p>
    </div>
</div>`,
                    episodes: `<div class="function-section">
    <h3><i class="fas fa-star"></i> Ключевые эпизоды</h3>
    <div class="function-content">
        <ol style="line-height: 1.8;">
            <li><strong>Приезд Чичикова в город</strong> — знакомство с читателем и завязка сюжета.</li>
            <li><strong>Визит к Манилову</strong> — первая покупка мёртвых душ.</li>
            <li><strong>Визит к Коробочке</strong> — Чичиков сталкивается с упрямством и глупостью помещицы.</li>
            <li><strong>Встреча с Ноздрёвым</strong> — опасное столкновение с авантюристом.</li>
            <li><strong>Общение с Собакевичем</strong> — показ расчётливости и жесткости характера.</li>
            <li><strong>Визит к Плюшкину</strong> — портрет крайней степени жадности и скупости.</li>
            <li><strong>Сон Чичикова</strong> — символический эпизод, раскрывающий подсознание героя.</li>
            <li><strong>Скандал в городе</strong> — кульминация и разоблачение.</li>
        </ol>
    </div>
</div>`,
                    movies: `<div class="function-section">
    <h3><i class="fas fa-film"></i> Экранизации</h3>
    <div class="function-content">
        <ul style="line-height: 1.8;">
            <li><strong>1984</strong> — реж. Михаил Швейцер (СССР)</li>
            <li><strong>2005</strong> — реж. Павел Лунгин (Россия)</li>
            <li><strong>2018</strong> — мини-сериал "Мёртвые души" (Россия)</li>
        </ul>
    </div>
</div>`,
                    tests: `<div class="function-section">
    <h3><i class="fas fa-question-circle"></i> Тест по "Мёртвым душам"</h3>
    <div class="function-content">
        <ol style="line-height: 1.8;">
            <li>Что такое "мёртвые души" в произведении Гоголя?
                <ul>
                    <li>а) Умершие крепостные крестьяне, которые ещё числятся в ревизских сказках</li>
                    <li>б) Неразделенные наследства</li>
                    <li>в) Призраки в старом доме</li>
                    <li>г) Души грешников, не нашедшие покоя</li>
                </ul>
            </li>
            <li>В какой последовательности Чичиков посещал помещиков?
                <ul>
                    <li>а) Манилов, Коробочка, Ноздрёв, Собакевич, Плюшкин</li>
                    <li>б) Плюшкин, Собакевич, Ноздрёв, Коробочка, Манилов</li>
                    <li>в) Ноздрёв, Манилов, Коробочка, Собакевич, Плюшкин</li>
                    <li>г) Коробочка, Манилов, Ноздрёв, Плюшкин, Собакевич</li>
                </ul>
            </li>
            <li>Какой помещик изображён как мечтатель и фантазёр?
                <ul>
                    <li>а) Собакевич</li>
                    <li>б) Манилов</li>
                    <li>в) Ноздрёв</li>
                    <li>г) Плюшкин</li>
                </ul>
            </li>
            <li>Что покупал Чичиков у помещиков?
                <ul>
                    <li>а) Землю</li>
                    <li>б) Дома</li>
                    <li>в) Крепостных крестьян, числящихся живыми по документам</li>
                    <li>г) Старинные книги</li>
                </ul>
            </li>
            <li>Какой помещик славился своей невероятной скупостью?
                <ul>
                    <li>а) Манилов</li>
                    <li>б) Ноздрёв</li>
                    <li>в) Собакевич</li>
                    <li>г) Плюшкин</li>
                </ul>
            </li>
        </ol>
        <p style="margin-top: 20px; font-style: italic; color: #6B7280;">Ответы на тест доступны в полной версии платформы.</p>
    </div>
</div>`
                }
            },
            'crime-and-punishment': {
                title: 'Преступление и наказание',
                author: 'Ф.М. Достоевский',
                class: '10',
                isRussian: true,
                chapters: [
                    {
                        title: 'Часть первая, Глава I',
                        content: `<p><strong>Роман в шести частях с эпилогом</strong></p>
<p><strong>Часть первая</strong></p>
<p><strong>Глава I</strong></p>
<p>В начале июля, в чрезвычайно жаркое время, под вечер, один молодой человек вышел из своей <span class="highlighted-word" data-word="каморки">каморки</span>, которую нанимал от жильцов в С — м переулке, на улицу и медленно, как бы в нерешимости, отправился к К — ну мосту.</p>
<p>Он благополучно избегнул встречи с своею хозяйкой на лестнице. Каморка его приходилась под самою кровлей высокого пятиэтажного дома и походила более на шкаф, чем на квартиру. Квартирная же хозяйка его, у которой он нанимал эту каморку с обедом и прислугой, помещалась одною лестницей ниже, в отдельной квартире, и каждый раз, при выходе на улицу, ему непременно надо было проходить мимо хозяйкиной кухни, почти всегда настежь отворенной на лестницу. И каждый раз молодой человек, проходя мимо, чувствовал какое-то болезненное и трусливое ощущение, которого стыдился и от которого морщился. Он был должен кругом хозяйке и боялся с нею встретиться.</p>
<p>Не то чтобы он был так труслив и забит, совсем даже напротив; но с некоторого времени он был в раздражительном и напряженном состоянии, похожем на <span class="highlighted-word" data-word="ипохондрию">ипохондрию</span>. Он до того углубился в себя и уединился от всех, что боялся даже всякой встречи, не только встречи с хозяйкой. Он был задавлен бедностью; но даже стесненное положение перестало в последнее время тяготить его. Насущными делами своими он совсем перестал интересоваться; он не хотел ими заниматься. Никакой хозяйки, в сущности, он не боялся, какая бы ни была у него с ней нищета. Но остановиться на лестнице, выслушивать всякий вздор обо всей этой обыденной <span class="highlighted-word" data-word="дребедени">дребедени</span>, которой он вовсе и не касался, выносить упреки, угрозы, жалобы и при этом самому вилять, извиняться, лгать, — нет уж, лучше как-нибудь проскользнуть кошкой по лестнице и улизнуть, чтобы никто не видал.</p>
<p>Впрочем, на этот раз страх встречи с своею кредиторшей даже его самого поразил, когда он вышел на улицу.</p>
<p>«На какое дело хочу покуситься и в то же время каких пустяков боюсь! — подумал он с странною улыбкой. — Гм... да... всё в руках человека, и всё-то он мимо носу проносит, единственно от одной трусости... это уж аксиома... Любопытно, чего люди больше всего боятся? Нового шага, нового собственного слова они больше всего боятся... А впрочем, я слишком много болтаю. Оттого и ничего не делаю, что болтаю. Пожалуй, впрочем, и так: оттого болтаю, что ничего не делаю. Это я в этот последний месяц выучился болтать, лежа по целым дням в углу и думая... о царе Горохе. Ну зачем я теперь иду? Разве я способен на это? Разве это серьезно? Совсем не серьезно. Так, ради фантазии сам себя тешу; игрушки! Да, пожалуй что и игрушки!»</p>
<p>На улице жара стояла страшная, к тому же духота, толкотня, всюду известь, леса, кирпич, пыль и та особенная летняя вонь, столь известная каждому петербуржцу, не имеющему возможности нанять дачу, — всё это разом неприятно потрясло и без того уже расстроенные нервы юноши. Невыносимая же вонь из распивочных, которых в этой части города особенное множество, и пьяные, поминутно попадавшиеся, несмотря на буднее время, довершили отвратительный и грустный колорит картины. Чувство глубочайшего омерзения мелькнуло на мгновение в тонких чертах молодого человека. Кстати, он был замечательно хорош собою, с прекрасными темными глазами, темно-рус, ростом выше среднего, тонок и строен. Но скоро он впал как бы в глубокую задумчивость, даже, вернее сказать, как бы в какое-то забытье, и пошел, уже не замечая окружающего, да и не желая его замечать. Изредка только бормотал он что-то про себя, от своей же, впрочем, привычки к монологам, в которой он сейчас сам себе признался. В эту минуту он и сам сознавал, что мысли его порою мешаются и что он очень слаб: второй день как уж ему почти совсем нечего было есть.</p>
<p>Он был до того худо одет, что иной, даже и привычный человек, посовестился бы днем выходить в таких <span class="highlighted-word" data-word="лохмотьях">лохмотьях</span> на улицу. Впрочем, квартал был таков, что костюмом здесь было трудно кого-нибудь удивить. Близость <span class="highlighted-word" data-word="Сенной">Сенной</span>, обилие известных заведений и, по преимуществу, цехового и ремесленного населения, скученного в этих серединных петербургских улицах и переулках, пестрили иногда общую картину такими субъектами, что странно было бы и удивляться при встрече с иною фигурой. Но столько злобного презрения уже накопилось в душе молодого человека, что, несмотря на всю свою, иногда очень молодую, щекотливость, он менее всего совестился своих лохмотьев на улице. Другое дело при встрече с иными знакомыми или с прежними товарищами, с которыми вообще он не любил встречаться... А между тем, когда один пьяный, которого неизвестно почему и куда провозили в это время по улице в огромной телеге, запряженной огромной ломовой лошадью, крикнул ему вдруг, проезжая: «Эй ты, немецкий шляпник!» — и заорал во все горло, указывая на него рукой, — молодой человек вдруг остановился и судорожно схватился за свою шляпу. Это была высокая круглая циммермановская шляпа, но вся уже изношенная, совсем рыжая, вся в дырах и пятнах, без полей и самым безобразнейшим углом заломившаяся на сторону. Но не стыд, а совсем другое чувство, похожее даже на испуг, охватило его.</p>
<p>«Так и знал! — бормотал он в смущении, — я так и думал! Это уж всего хуже! Вот такая какая-нибудь глупость, какая-нибудь пошлейшая мелочь, весь замысел может испортить! Да, слишком уж приметная шляпа... Смешная, потому и приметная... К моим лохмотьям непременно нужна фуражка, хоть старый блин какой-нибудь, а не этот урод. Никто таких не носит, далеко за версту заметят, запомнят... главное, потом запомнят, ан и улика. Тут нужно быть как можно неприметнее... Мелочи, мелочи главное!.. Вот эти-то мелочи и губят всегда и всё...»</p>
<p>Идти ему было немного; он даже знал, сколько шагов от ворот его дома: ровно семьсот тридцать. Как-то раз он их сосчитал, когда уж очень размечтался. В то время он и сам еще не верил этим мечтам и только раздражал себя их безобразною, но соблазнительною дерзостью. Теперь же, месяц спустя, он уже начинал смотреть иначе и, несмотря на все поддразнивающие монологи о собственном бессилии и нерешительности, как-то даже поневоле привык считать «безобразную» мечту уже предприятием, хотя все еще сам себе не верил. Он даже шел теперь делать пробу своему предприятию, и с каждым шагом волнение его возрастало все сильнее и сильнее.</p>
<p>С замиранием сердца и нервною дрожью подошел он к преогромнейшему дому, выходившему одною стеной на канаву, а другою в — ю улицу. Этот дом стоял весь в мелких квартирах и заселен был всякими промышленниками — портными, слесарями, кухарками, разными немцами, девицами, живущими от себя, мелким чиновничеством и проч. Входящие и выходящие так и шмыгали под обоими воротами и на обоих дворах дома. Тут служили три или четыре дворника. Молодой человек был очень доволен, что не встретил ни одного из них, и неприметно проскользнул сейчас же из ворот направо на лестницу. Лестница была темная и узкая, «черная», но он все это уже знал и изучил, и ему вся эта обстановка нравилась: в такой темноте даже и любопытный взгляд был неопасен. «Если я теперь так боюсь, что же было бы, если б и в самом деле как-нибудь случилось приступить к самому делу?» — подумал он невольно, подходя к четвертому этажу. Тут загородили ему дорогу отставные солдаты-носильщики, выносившие из одной квартиры мебель. Он уже прежде знал, что в этой квартире жил один семейный немец, чиновник: «Стало быть, этот немец теперь выезжает, и, стало быть, на четвертом этаже, по этой лестнице и на этой площадке, останется, на некоторое время, только одна старухина квартира занятая. Это хорошо... на всякий случай...» — подумал он опять и позвонил в квартиру старухи. Звонок брякнул слабо, как будто был сделан из жести, а не из меди. В подобных мелких квартирах таких домов почти все такие звонки. Он уже забыл звонок этого звонка, и теперь этот особенный звонок как будто вдруг что-то напомнил ему и ясно представил... Он так и вздрогнул, нервы-то уж слишком ослабели. Немного спустя дверь приотворилась на крошечную щелочку: жиличка оглядывала из щели пришедшего с видимым недоверием, и только виднелись ее сверкавшие из темноты глазки. Но, увидав на площадке много людей, она ободрилась и отворила совсем. Молодой человек переступил через порог в темную прихожую, разгороженную перегородкой, за которой была крошечная кухня. Старуха стояла перед ним молча и вопросительно на него глядела. Это была крошечная, сухая старушонка, лет шестидесяти, с вострыми и злыми глазками, маленьким вострым носом и простоволосая. Белобрысые, мало поседевшие волосы ее были жирно смазаны маслом. На ее тонкой и длинной шее, похожей на куриную ногу, было наверчено какое-то фланелевое тряпье, а на плечах, несмотря на жару, болталась вся истрепанная и пожелтелая меховая <span class="highlighted-word" data-word="кацавейка">кацавейка</span>. Старушонка поминутно кашляла и кряхтела. Должно быть, молодой человек взглянул на нее каким-нибудь особенным взглядом, потому что и в ее глазах мелькнула вдруг прежняя недоверчивость.</p>
<p>— Раскольников, студент, был у вас месяц назад, — поспешил пробормотать молодой человек с полупоклоном, вспомнив, что надо быть любезнее.</p>
<p>— Помню, батюшка, очень хорошо помню, что вы были, — отчетливо проговорила старуха, по-прежнему не отводя своих вопрошающих глаз от его лица.</p>
<p>— Так вот-с... и опять, по такому же делу... — продолжал Раскольников, немного смутившись и удивляясь недоверчивости старухи.</p>
<p>«Может, она всегда такая, да я в тот раз не заметил», — подумал он с неприятным чувством.</p>
<p>Старуха помолчала, как бы в раздумье, потом отступила в сторону и, указывая на дверь в комнату, произнесла, пропуская гостя вперед:</p>
<p>— Пройдите, батюшка.</p>
<p>Небольшая комната, в которую прошел молодой человек, с желтыми обоями, геранями и кисейными занавесками на окнах, была в эту минуту ярко освещена заходящим солнцем. «И тогда, стало быть, так же будет солнце светить!..» — как бы невзначай мелькнуло в уме Раскольникова, и быстрым взглядом окинул он все в комнате, чтобы по возможности изучить и запомнить расположение. Но в комнате не было ничего особенного. Мебель, вся очень старая и из желтого дерева, состояла из дивана с огромной выгнутой деревянной спинкой, круглого стола овальной формы перед диваном, туалета с зеркальцем в простенке, стульев по стенам да двух-трех грошовых картинок в желтых рамках, изображавших немецких барышень с птицами в руках, — вот и вся мебель. В углу перед небольшим образом горела лампада. Все было очень чисто: и мебель, и полы были оттерты под лоск; все блестело. «Лизаветино дело», — подумал молодой человек. Ни пылинки нельзя было найти во всей квартире. «Это у злых и старых вдовиц бывает такая чистота», — продолжал про себя Раскольников и с любопытством покосился на ситцевую занавеску перед дверью во вторую, крошечную комнатку, где стояли старухины постель и комод и куда он еще ни разу не заглядывал. Вся квартира состояла из этих двух комнат.</p>
<p>— Что угодно? — строго произнесла старушонка, войдя в комнату и по-прежнему становясь прямо перед ним, чтобы глядеть ему прямо в лицо.</p>
<p>— Заклад принес, вот-с! — и он вынул из кармана старые плоские серебряные часы. На оборотной дощечке их был изображен глобус. Цепочка была стальная.</p>
<p>— Да ведь и прежний заклад просрочен. Уж месяц как третьего дня прошло.</p>
<p>— Я вам проценты еще за месяц внесу; потерпите.</p>
<p>— А в том моя добрая воля, батюшка, терпеть или вашу вещь теперь же продать.</p>
<p>— Много ль за часы-то, Алена Ивановна?</p>
<p>— А с пустяками ходишь, батюшка, ничего, почитай, не стоит. За колечко-то в прошлый раз два билетика принесла, а оно и купить-то его новое у ювелира за полтора рубля можно.</p>
<p>— Рубля четыре дайте, я выкуплю, отцовские. Я скоро деньги получу.</p>
<p>— Полтора рубля-с и процент вперед, коли хотите-с.</p>
<p>— Полтора рубля! — вскричал молодой человек.</p>
<p>— Ваша воля. — И старуха протянула ему назад часы. Молодой человек взял их и до того рассердился, что хотел было уйти; но тотчас же одумался, вспомнив, что идти больше некуда и что он и за другим пришел.</p>
<p>— Давайте! — сказал он грубо.</p>
<p>Старуха полезла в карман за ключами и пошла в другую комнату за занавески. Молодой человек, оставшись один посереди комнаты, любопытно прислушивался и соображал. Слышно было, как она отперла комод. «Должно быть, верхний ящик, — соображал он. — Ключи, стало быть, у ней в правом кармане... Все на одной связке, в стальном кольце... И один там ключ всех больше, втрое, с зубчатою бородкой, конечно, не от комода... Стало быть, есть еще какой-нибудь укладчик, или сундук... Это любопытно. У сундуков все такие ключи... А впрочем, как это подло...»</p>
<p>Старуха воротилась.</p>
<p>— Вот-с, батюшка: коли уж по гривне в месяц с рубля, так за полтора рубля причтется с вас пятнадцать копеек, за месяц вперед-с. Да за два прежних рубля с вас еще причитается за два месяца вперед по тому же счету, двадцать копеек. А всего, значит, тридцать пять. Приходится же вам получить теперь за часы ваши всего рубль пятнадцать копеек. Вот получите-с.</p>
<p>— Как! так теперь только рубль пятнадцать копеек!</p>
<p>— Именно так-с.</p>
<p>Молодой человек не спорил и взял деньги. Он смотрел на старуху и не спешил уходить, точно ему еще хотелось что-то сказать или сделать, но как будто он и сам не знал, что именно...</p>
<p>— Я, Алена Ивановна, может быть, на днях, еще одну вещицу принесу... серебряную... хорошую... папиросочницу одну... как от товарища назад получу... — Он смутился и замолчал.</p>
<p>— Ну тогда и поговорим, батюшка.</p>
<p>— Прощайте-с... А вы все дома одни сидите, сестрицы-то нет? — спросил он как можно развязнее, выходя в переднюю.</p>
<p>— А вам какое до нее, батюшка, дело?</p>
<p>— Да так-с. Я так спросил. Уж вы сейчас... Прощайте, Алена Ивановна!</p>
<p>Раскольников вышел в решительном смущении. Смущение это все более и более увеличивалось. Сходя с лестницы, он даже несколько раз останавливался, как будто чем-то внезапно пораженный. И наконец, уже на улице, он воскликнул:</p>
<p>«О боже! как это все отвратительно! И неужели, неужели я... нет, это вздор, это нелепость! — прибавил он решительно. — И неужели такой ужас мог прийти мне в голову? На какую грязь способно, однако, мое сердце! Главное: грязно, пакостно, гадко, гадко!.. И я, целый месяц...»</p>
<p>Но он не мог выразить ни словами, ни восклицаниями своего волнения. Чувство бесконечного отвращения, начинавшее давить и мутить его сердце еще в то время, как он только шел к старухе, достигло теперь такого размера и так ярко выяснилось, что он не знал, куда деться от тоски своей. Он шел по тротуару как пьяный, не замечая прохожих и сталкиваясь с ними, и опомнился уже на следующей улице. Оглянувшись, он заметил, что стоит подле распивочной, в которую вход был с тротуара по лестнице вниз, в подвальный этаж. Как раз в это мгновение из двери выходили двое пьяных и, поддерживая и ругая друг друга, взбирались на улицу. Не долго думая, Раскольников тотчас же спустился вниз. Никогда до сих пор не заходил он в распивочные, но теперь голова у него кружилась, и к тому же палящая жажда томила его. Ему захотелось выпить холодного пива, тем более что внезапную слабость свою он относил и к тому, что был голоден. Он уселся в темном и грязном углу, за липким столиком, спросил пива и с жадностью выпил первый стакан. Тотчас же все отлегло, и мысли его прояснели. «Все это вздор, — сказал он с надеждой, — и нечем тут было смущаться! Просто физическое расстройство! Один стакан пива, кусок сухаря, — и вот, в один миг, крепнет ум, яснеет мысль, твердеют намерения! Тьфу, какое все это ничтожество!..» Но, несмотря на этот презрительный плевок, он глядел уже весело, как будто внезапно освободясь от какого-то ужасного бремени, и дружелюбно окинул глазами присутствующих. Но даже и в эту минуту он смутно предчувствовал, что вся эта восприимчивость к лучшему тоже болезненна.</p>
<p>В распивочной в это время оставалось немного народу. Кроме тех двух пьяных, что повстречались на лестнице, за ними тотчас же пронеслась еще целая ватага, человек в пять, с девкой и с гармоникой. После них стало тихо, просторно и грязно. Оставался сидящий, по виду мещанин, пьяный, но не очень, за пивом, и товарищ его, толстый, огромный, с седою бородою, в сибирке, очень пьяный, задремавший на лавке, и изредка, вдруг, как бы во сне, начинавший прищелкивать пальцами, расставлял руки и подергивал верхнею частью туловища, не сходя с лавки, и при этом напевал какую-то дребедень, силясь припомнить стихи, вроде:</p>
<p style="margin-left: 20px; font-style: italic;">
Жену всю неделю<br>
Целовал и любил...
</p>
<p>Или вдруг, проснувшись, опять:</p>
<p style="margin-left: 20px; font-style: italic;">
По Подьяческой гулял,<br>
Прежнюю нашел...
</p>
<p>Но никто не разделял его счастия; молчаливый товарищ его смотрел даже враждебно и недоверчиво на все эти вспышки. Был тут еще один человек, по виду похожий на отставного чиновника. Он сидел отдельно, перед своею посудинкой, изредка отпивая и оглядываясь кругом. Он тоже казался в некотором волнении.</p>`
                    }
                ],
                materials: {
                    characters: `<div class="function-section">
    <h3><i class="fas fa-users"></i> Все персонажи "Преступления и наказания"</h3>
    <div class="function-content">
        <div class="function-grid">
            <div class="function-item">
                <h4>Родион Раскольников</h4>
                <p>Студент, главный герой, создатель теории о "сильной личности"</p>
            </div>
            <div class="function-item">
                <h4>Соня Мармеладова</h4>
                <p>Дочь пьяницы, символ жертвенности и духовного спасения</p>
            </div>
            <div class="function-item">
                <h4>Порфирий Петрович</h4>
                <p>Следователь, психолог, ведущий дуэль ума с Раскольниковым</p>
            </div>
            <div class="function-item">
                <h4>Алёна Ивановна</h4>
                <p>Старуха-процентщица, жертва преступления</p>
            </div>
            <div class="function-item">
                <h4>Лизавета Ивановна</h4>
                <p>Сестра Алёны Ивановны, случайная жертва</p>
            </div>
            <div class="function-item">
                <h4>Дунечка Раскольникова</h4>
                <p>Сестра Родиона, готовая пожертвовать собой ради брата</p>
            </div>
        </div>
    </div>
</div>`,
                    history: `<div class="function-section">
    <h3><i class="fas fa-landmark"></i> Исторический контекст "Преступления и наказания"</h3>
    <div class="function-content">
        <p>Роман написан в 1866 году и отражает сложную эпоху пореформенной России после отмены крепостного права в 1861 году.</p>
        
        <div class="function-grid">
            <div class="function-item">
                <h4>Социальные условия:</h4>
                <ul>
                    <li>Быстрая урбанизация и рост городского населения</li>
                    <li>Резкое расслоение общества на богатых и бедных</li>
                    <li>Распространение нищеты в городских трущобах</li>
                </ul>
            </div>
            <div class="function-item">
                <h4>Интеллектуальный климат:</h4>
                <ul>
                    <li>Популярность утилитаризма и идей "разумного эгоизма"</li>
                    <li>Влияние западноевропейской философии</li>
                    <li>Споры между славянофилами и западниками</li>
                </ul>
            </div>
            <div class="function-item">
                <h4>Экономическая ситуация:</h4>
                <ul>
                    <li>Разорение многих дворянских семей после реформ</li>
                    <li>Ростовщичество как распространённое явление</li>
                    <li>Высокая стоимость образования, недоступная многим</li>
                </ul>
            </div>
        </div>
        
        <p>Достоевский создавал роман в период личных финансовых трудностей, что отразилось на описании бедности и отчаяния героев.</p>
    </div>
</div>`,
                    culture: `<div class="function-section">
    <h3><i class="fas fa-theater-masks"></i> Культурный код "Преступления и наказания"</h3>
    <div class="function-content">
        <div class="function-grid">
            <div class="function-item">
                <h4>Петербург как персонаж:</h4>
                <p>Город представлен как душный, давящий, болезненный организм. Летняя жара создаёт ощущение лихорадки и безумия.</p>
            </div>
            <div class="function-item">
                <h4>Библейские мотивы:</h4>
                <p>История о воскрешении Лазаря — центральная метафора духовного возрождения. Мотив искупления греха через страдание.</p>
            </div>
            <div class="function-item">
                <h4>Психологический реализм:</h4>
                <p>Достоевский исследует глубины человеческой психики. Внутренние монологи Раскольникова показывают борьбу разума и совести.</p>
            </div>
            <div class="function-item">
                <h4>Социальная критика:</h4>
                <p>Осуждение теорий, оправдывающих преступление "во имя высшей цели". Критика утилитарной морали, где всё измеряется выгодой.</p>
            </div>
        </div>
        
        <h4 style="margin-top: 20px;">Философская проблематика:</h4>
        <ul style="line-height: 1.8;">
            <li>Вопрос о границах человеческой свободы</li>
            <li>Проблема оправдания зла для достижения добра</li>
            <li>Поиск смысла страдания в человеческой жизни</li>
            <li>Конфликт между индивидуальным бунтом и христианским смирением</li>
        </ul>
    </div>
</div>`,
                    schemes: `<div class="function-section">
    <h3><i class="fas fa-project-diagram"></i> Семейные связи и взаимодействия</h3>
    <div class="function-content">
        <div style="background: #F9FAFB; padding: 15px; border-radius: 10px; margin: 15px 0; font-size: 0.9rem; line-height: 1.5;">
            <strong>Семья Раскольниковых:</strong><br>
            Пульхерия (мать) ←→ Родион (сын) ←→ Дунечка (сестра)<br>
            ↑<br>
            <strong>Семья Мармеладовых:</strong><br>
            Семён (отец) + Катерина (мачеха) → Соня + Полина + Лёля + Колька<br>
            <br>
            <strong>Взаимодействия:</strong><br>
            • Раскольников ←→ Соня (духовное спасение)<br>
            • Раскольников ←→ Дунечка (защита и любовь)<br>
            • Раскольников ←→ Порфирий (психологическая дуэль)<br>
            • Дунечка ←→ Лужин (попытка замужества)<br>
            • Дунечка ←→ Свидригайлов (преследование)<br>
            • Семья Раскольниковых ←→ Семья Мармеладовых (пересечение судеб)<br>
            • Лужин ←→ Андрей Лебезятников (идеологический конфликт)
        </div>
    </div>
</div>`,
                    episodes: `<div class="function-section">
    <h3><i class="fas fa-star"></i> Ключевые эпизоды</h3>
    <div class="function-content">
        <ol style="line-height: 1.8;">
            <li><strong>Теоретические размышления о преступлении</strong> — формирование теории Раскольникова</li>
            <li><strong>Убийство старухи</strong> — центральное событие романа</li>
            <li><strong>Встреча с Порфирием</strong> — психологическая дуэль</li>
            <li><strong>Признание Соне</strong> — начало духовного возрождения</li>
            <li><strong>Покаяние и возрождение</strong> — эпилог, символизирующий надежду</li>
        </ol>
    </div>
</div>`,
                    movies: `<div class="function-section">
    <h3><i class="fas fa-film"></i> Экранизации</h3>
    <div class="function-content">
        <ul style="line-height: 1.8;">
            <li><strong>1970</strong> — реж. Люкино Висконти</li>
            <li><strong>2002</strong> — мини-сериал</li>
            <li><strong>2007</strong> — реж. Дмитрий Светозаров (Россия)</li>
        </ul>
    </div>
</div>`,
                    tests: `<div class="function-section">
    <h3><i class="fas fa-question-circle"></i> Тест по "Преступлению и наказанию"</h3>
    <div class="function-content">
        <ol style="line-height: 1.8;">
            <li>Как звали старуху-процентщицу, которую убил Раскольников?
                <ul>
                    <li>а) Алёна Ивановна</li>
                    <li>б) Марфа Петровна</li>
                    <li>в) Катерина Ивановна</li>
                    <li>г) Настасья Петровна</li>
                </ul>
            </li>
            <li>Кто такой Разумихин в романе?
                <ul>
                    <li>а) Врач, лечивший Раскольникова</li>
                    <li>б) Друг Раскольникова, добрый и отзывчивый человек</li>
                    <li>в) Следователь, ведущий дело об убийстве</li>
                    <li>г) Помещик, преследовавший Дунечку</li>
                </ul>
            </li>
            <li>Как звали сестру Родиона Раскольникова?
                <ul>
                    <li>а) Соня</li>
                    <li>б) Дунечка (Авдотья Романовна)</li>
                    <li>в) Полина</li>
                    <li>г) Катерина Ивановна</li>
                </ul>
            </li>
            <li>Какую теорию разработал Раскольников?
                <ul>
                    <li>а) Теорию о "сильной личности", имеющей право на преступление</li>
                    <li>б) Теорию общественного договора</li>
                    <li>в) Теорию утопического социализма</li>
                    <li>г) Теорию "малых дел"</li>
                </ul>
            </li>
            <li>Кто из героев символизирует жертвенность и духовное спасение?
                <ul>
                    <li>а) Дунечка Раскольникова</li>
                    <li>б) Соня Мармеладова</li>
                    <li>в) Пульхерия Александровна (мать Раскольникова)</li>
                    <li>г) Катерина Ивановна Мармеладова</li>
                </ul>
            </li>
        </ol>
        <p style="margin-top: 20px; font-style: italic; color: #6B7280;">Ответы на тест доступны в полной версии платформы.</p>
    </div>
</div>`
                }
            },
            'death-of-a-clerk': {
                title: 'Смерть чиновника',
                author: 'А.П. Чехов',
                class: '9',
                isRussian: true,
                chapters: [
                    {
                        title: 'Смерть чиновника',
                        content: `<p><strong>Смерть чиновника</strong></p>
<p>В один прекрасный вечер не менее прекрасный <span class="highlighted-word" data-word="экзекутор">экзекутор</span>, Иван Дмитрич Червяков, сидел во втором ряду кресел и глядел в бинокль на «Корневильские колокола». Он глядел и чувствовал себя на верху блаженства. Но вдруг... В рассказах часто встречается это «но вдруг». Авторы правы: жизнь так полна внезапностей! Но вдруг лицо его поморщилось, глаза подкатились, дыхание остановилось... он отвел от глаз бинокль, нагнулся и.. апчхи!!! Чихнул, как видите. Чихать никому и нигде не возбраняется. Чихают и мужики, и <span class="highlighted-word" data-word="полицмейстер">полицмейстеры</span>, и иногда даже и <span class="highlighted-word" data-word="тайный советник">тайные советники</span>. Все чихают. Червяков нисколько не сконфузился, утерся платочком и, как вежливый человек, поглядел вокруг себя: не обеспокоил ли он кого-нибудь своим чиханьем? Но тут уж пришлось сконфузиться. Он увидел, что старичок, сидевший впереди него, в первом ряду кресел, старательно вытирал свою лысину и шею перчаткой и бормотал что-то. В старичке Червяков узнал <span class="highlighted-word" data-word="статский генерал">статского генерала</span> Бризжалова, служащего по ведомству путей сообщения.</p>
<p>«Я его обрызгал! — подумал Червяков. — Не мой начальник, чужой, но все-таки неловко. Извиниться надо».</p>
<p>Червяков кашлянул, подался туловищем вперед и зашептал генералу на ухо:</p>
<p>— Извините, ваше — ство, я вас обрызгал... я нечаянно...</p>
<p>— Ничего, ничего...</p>
<p>— Ради бога, извините. Я ведь... я не желал!</p>
<p>— Ах, сидите, пожалуйста! Дайте слушать!</p>
<p>Червяков сконфузился, глупо улыбнулся и начал глядеть на сцену. Глядел он, но уж блаженства больше не чувствовал. Его начало помучивать беспокойство. В антракте он подошел к Бризжалову, походил возле него и, поборовши робость, пробормотал:</p>
<p>— Я вас обрызгал, ваше — ство... Простите... Я ведь... не то чтобы...</p>
<p>— Ах, полноте... Я уж забыл, а вы всё о том же! — сказал генерал и нетерпеливо шевельнул нижней губой.</p>
<p>«Забыл, а у самого ехидство в глазах, — подумал Червяков, подозрительно поглядывая на генерала. — И говорить не хочет. Надо бы ему объяснить, что я вовсе не желал... что это закон природы, а то подумает, что я плюнуть хотел. Теперь не подумает, так после подумает!..»</p>
<p>Придя домой, Червяков рассказал жене о своем невежестве. Жена, как показалось ему, слишком легкомысленно отнеслась к происшедшему; она только испугалась, а потом, когда узнала, что Бризжалов «чужой», успокоилась.</p>
<p>— А все-таки ты сходи, извинись, — сказала она. — Подумает, что ты себя в публике держать не умеешь!</p>
<p>— То-то вот и есть! Я извинялся, да он как-то странно... Ни одного слова путного не сказал. Да и некогда было разговаривать.</p>
<p>На другой день Червяков надел новый вицмундир, постригся и пошел к Бризжалову объяснить... Войдя в приемную генерала, он увидел там много просителей, а между просителями и самого генерала, который уже начал прием прошений. Опросив несколько просителей, генерал поднял глаза и на Червякова.</p>
<p>— Вчера в «Аркадии», ежели припомните, ваше — ство, — начал докладывать экзекутор, — я чихнул-с и... нечаянно обрызгал... Изв...</p>
<p>— Какие пустяки... Бог знает что! Вам что угодно? — обратился генерал к следующему просителю.</p>
<p>«Говорить не хочет! — подумал Червяков, бледнея. — Сердится, значит... Нет, этого нельзя так оставить... Я ему объясню...»</p>
<p>Когда генерал кончил беседу с последним просителем и направился во внутренние апартаменты, Червяков шагнул за ним и забормотал:</p>
<p>— Ваше — ство! Ежели я осмеливаюсь беспокоить ваше — ство, то именно из чувства, могу сказать, раскаяния!.. Не нарочно, сами изволите знать-с!</p>
<p>Генерал состроил плаксивое лицо и махнул рукой.</p>
<p>— Да вы просто смеетесь, милостисдарь! — сказал он, скрываясь за дверью.</p>
<p>«Какие же тут насмешки? — подумал Червяков. — Вовсе тут нет никаких насмешек! Генерал, а не может понять! Когда так, не стану же я больше извиняться перед этим фанфароном! Чёрт с ним! Напишу ему письмо, а ходить не стану! Ей-богу, не стану!»</p>
<p>Так думал Червяков, идя домой. Письма генералу он не написал. Думал, думал, и никак не выдумал этого письма. Пришлось на другой день идти самому объяснить.</p>
<p>— Я вчера приходил беспокоить ваше — ство, — забормотал он, когда генерал поднял на него вопрошающие глаза, — не для того, чтобы смеяться, как вы изволили сказать. Я извинялся за то, что, чихая, брызнул-с..., а смеяться я и не думал. Смею ли я смеяться? Ежели мы будем смеяться, так никакого тогда, значит, и уважения к персонам... не будет...</p>
<p>— Пошел вон!! — гаркнул вдруг посиневший и затрясшийся генерал.</p>
<p>— Что-с? — спросил шёпотом Червяков, млея от ужаса.</p>
<p>— Пошел вон!! — повторил генерал, затопав ногами.</p>
<p>В животе у Червякова что-то оторвалось. Ничего не видя, ничего не слыша, он попятился к двери, вышел на улицу и поплелся... Придя машинально домой, не снимая вицмундира, он лег на диван и... помер.</p>`
                    }
                ],
                materials: {
                    characters: `<div class="function-section">
    <h3><i class="fas fa-users"></i> Персонажи "Смерти чиновника"</h3>
    <div class="function-content">
        <div class="function-grid">
            <div class="function-item">
                <h4>Иван Дмитрич Червяков</h4>
                <p>Коллежский экзекутор, мелкий чиновник, одержимый чинопочитанием</p>
            </div>
            <div class="function-item">
                <h4>Статский генерал Бризжалов</h4>
                <p>Начальник, высокопоставленный чиновник, объект страха Червякова</p>
            </div>
            <div class="function-item">
                <h4>Жена Червякова</h4>
                <p>Второстепенный персонаж, пытающаяся помочь мужу</p>
            </div>
        </div>
    </div>
</div>`,
                    history: `<div class="function-section">
    <h3><i class="fas fa-landmark"></i> Исторический контекст</h3>
    <div class="function-content">
        <p>Написан в 1883 году, во времена крепостничества и сильной бюрократической иерархии в России. Чиновники были одержимы соблюдением субординации и чинопочитанием.</p>
        <p>В Российской империи существовала строгая иерархия чинов по Табели о рангах. Чиновники низших рангов испытывали патологический страх перед высшими, что Чехов мастерски изобразил в рассказе.</p>
    </div>
</div>`,
                    culture: `<div class="function-section">
    <h3><i class="fas fa-theater-masks"></i> Культурный код</h3>
    <div class="function-content">
        <p>Рассказ — сатира на чинопочитание и психологическую зависимость мелких чиновников от высших должностных лиц. "Апчхи!" — символ человеческого бессилия перед системой.</p>
        <p>Чехов показывает, как бюрократическая система калечит человеческую психику, превращая людей в рабов условностей и иерархии.</p>
    </div>
</div>`,
                    schemes: `<div class="function-section">
    <h3><i class="fas fa-project-diagram"></i> Схемы</h3>
    <div class="function-content">
        <p>Иерархия: Генерал → Червяков → Смерть. Замкнутый круг страха и зависимости.</p>
        <div style="background: #F9FAFB; padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center;">
            <strong>Цепь событий:</strong><br>
            Чих → Страх → Извинения → Паника → Смерть
        </div>
    </div>
</div>`,
                    episodes: `<div class="function-section">
    <h3><i class="fas fa-star"></i> Ключевые эпизоды</h3>
    <div class="function-content">
        <ol style="line-height: 1.8;">
            <li><strong>Чих в театре</strong> — завязка конфликта</li>
            <li><strong>Первая попытка извиниться</strong> — начало навязчивой идеи</li>
            <li><strong>Разговор с женой</strong> — усиление беспокойства</li>
            <li><strong>Вторая попытка извиниться в приемной</strong> — эскалация конфликта</li>
            <li><strong>Финальная сцена и смерть</strong> — трагическая развязка</li>
        </ol>
    </div>
</div>`,
                    movies: `<div class="function-section">
    <h3><i class="fas fa-film"></i> Экранизации</h3>
    <div class="function-content">
        <p>Несколько короткометражных экранизаций в советское время и современности.</p>
        <ul style="line-height: 1.8;">
            <li><strong>1966</strong> — экранизация в СССР</li>
            <li><strong>2007</strong> — современная интерпретация</li>
        </ul>
    </div>
</div>`,
                    tests: `<div class="function-section">
    <h3><i class="fas fa-question-circle"></i> Тест по рассказу "Смерть чиновника"</h3>
    <div class="function-content">
        <ol style="line-height: 1.8;">
            <li>Как называется должность Червякова?
                <ul>
                    <li>а) Статский советник</li>
                    <li>б) Коллежский экзекутор</li>
                    <li>в) Титулярный советник</li>
                    <li>г) Надворный советник</li>
                </ul>
            </li>
            <li>Как звали генерала, на которого чихнул Червяков?
                <ul>
                    <li>а) Бризжалов</li>
                    <li>б) Плужников</li>
                    <li>в) Моржов</li>
                    <li>г) Баранов</li>
                </ul>
            </li>
            <li>Где произошёл инцидент с чиханием?
                <ul>
                    <li>а) В театре, во время спектакля "Корневильские колокола"</li>
                    <li>б) На приёме у губернатора</li>
                    <li>в) В церкви во время службы</li>
                    <li>г) На балу в дворянском собрании</li>
                </ul>
            </li>
            <li>Какова основная тема рассказа Чехова?
                <ul>
                    <li>а) Любовь и ревность</li>
                    <li>б) Чинопочитание и рабская психология</li>
                    <li>в) Социальная несправедливость</li>
                    <li>г) Тема искусства и творчества</li>
                </ul>
            </li>
            <li>Чем закончился рассказ?
                <ul>
                    <li>а) Червяков получил повышение по службе</li>
                    <li>б) Генерал простил Червякова</li>
                    <li>в) Червяков умер от переживаний</li>
                    <li>г) Червяков подал в отставку</li>
                </ul>
            </li>
        </ol>
        <p style="margin-top: 20px; font-style: italic; color: #6B7280;">Ответы на тест доступны в полной версии платформы.</p>
    </div>
</div>`
                }
            }
        };

        // Словарь для пояснения сложных слов
        const wordMeanings = {
            // Мёртвые души
            'бричка': 'Лёгкий четырёхколёсный экипаж для перевозки пассажиров, популярный в России XIX века',
            'канифасовых': 'Из канифаса — хлопчатобумажной ткани саржевого переплетения',
            'демикотонном': 'Из демикотона — плотной хлопчатобумажной ткани',
            'сбитенщик': 'Торговец сбитнем — старинным русским горячим напитком из мёда и пряностей',
            
            // Преступление и наказание
            'каморки': 'Небольшая, тесная комната, обычно под крышей, каморка',
            'ипохондрию': 'Психическое расстройство, проявляющееся в постоянном беспокойстве о своём здоровье',
            'дребедени': 'Мелкие, незначительные дела, пустяки, ерунда',
            'лохмотьях': 'Рваной, ветхой, изношенной одежде',
            'Сенной': 'Сенная площадь — район в Петербурге, где находились рынки и распивочные',
            'кацавейка': 'Короткая женская шубка из овчины или других мехов',
            
            // Смерть чиновника
            'экзекутор': 'Должностное лицо в судебных учреждениях Российской империи, отвечающее за исполнение судебных решений (обычно низший чин)',
            'полицмейстер': 'Начальник полиции города в Российской империи (высокий чин)',
            'тайный советник': 'Гражданский чин 3-го класса по Табели о рангах в Российской империи, соответствовал генерал-лейтенанту в армии',
            'статский генерал': 'Высший чин гражданской службы в России (3-й или 4-й класс по Табели о рангах), "статский" означает гражданский (не военный)'
        };

        // Текущая книга и глава
        let currentBookId = null;
        let currentChapterIndex = 0;

        function openBook(bookId) {
            currentBookId = bookId;
            currentChapterIndex = 0;
            const book = bookTexts[bookId];
            if (book) {
                document.getElementById('bookTitle').textContent = book.title;
                document.getElementById('bookChapter').textContent = book.chapters[currentChapterIndex].title;
                document.getElementById('readerContent').innerHTML = book.chapters[currentChapterIndex].content;
                showPage('readerPage');
                initWordHighlights();
                updateNavigationButtons();
            }
        }

        function nextChapter() {
            const book = bookTexts[currentBookId];
            if (book && currentChapterIndex < book.chapters.length - 1) {
                currentChapterIndex++;
                document.getElementById('bookChapter').textContent = book.chapters[currentChapterIndex].title;
                document.getElementById('readerContent').innerHTML = book.chapters[currentChapterIndex].content;
                initWordHighlights();
                updateNavigationButtons();
            }
        }

        function prevChapter() {
            const book = bookTexts[currentBookId];
            if (book && currentChapterIndex > 0) {
                currentChapterIndex--;
                document.getElementById('bookChapter').textContent = book.chapters[currentChapterIndex].title;
                document.getElementById('readerContent').innerHTML = book.chapters[currentChapterIndex].content;
                initWordHighlights();
                updateNavigationButtons();
            }
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevChapterBtn');
            const nextBtn = document.getElementById('nextChapterBtn');
            prevBtn.disabled = currentChapterIndex === 0;
            nextBtn.disabled = currentChapterIndex === bookTexts[currentBookId].chapters.length - 1;
        }

        function initWordHighlights() {
            const highlights = document.querySelectorAll('.highlighted-word');
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            document.body.appendChild(tooltip);
            highlights.forEach(word => {
                word.addEventListener('mouseenter', function(e) {
                    const meaning = wordMeanings[this.dataset.word];
                    if (meaning) {
                        tooltip.innerHTML = `<strong>${this.dataset.word}</strong><br>${meaning}`;
                        tooltip.style.display = 'block';
                        const rect = this.getBoundingClientRect();
                        tooltip.style.top = (rect.top - tooltip.offsetHeight - 10) + 'px';
                        tooltip.style.left = rect.left + 'px';
                    }
                });
                word.addEventListener('mouseleave', function() {
                    tooltip.style.display = 'none';
                });
            });
        }

        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            if (pageId === 'libraryPage') {
                loadBooks('all');
            }
        }

        function loadBooks(category) {
            const container = document.getElementById('booksContainer');
            container.innerHTML = '';
            Object.keys(bookTexts).forEach(bookId => {
                const book = bookTexts[bookId];
                let show = category === 'all' || 
                          (category === 'russian' ? book.isRussian : book.class === category);
                if (show) {
                    const tag = book.class === '9' ? '9 класс' : 
                               book.class === '10' ? '10 класс' : 
                               book.class === '11' ? '11 класс' : 'Русская классика';
                    const bookElement = document.createElement('div');
                    bookElement.className = 'book-item';
                    bookElement.innerHTML = `
                        <div class="book-cover">
                            <i class="fas fa-book"></i>
                            <div class="book-tag">${tag}</div>
                        </div>
                        <div class="book-info">
                            <h3>${book.title}</h3>
                            <p class="book-meta">${book.author}</p>
                            <p>Полный текст с пояснениями сложных слов.</p>
                            <div class="book-difficulty">Сложность: Средняя</div>
                            <button class="read-btn" onclick="openBook('${bookId}')">
                                <i class="fas fa-book-open"></i> Читать
                            </button>
                        </div>
                    `;
                    container.appendChild(bookElement);
                }
            });
        }

        function closeMaterials() {
            document.getElementById('materialsModal').classList.remove('active');
        }

        function changeFontSize(delta) {
            const content = document.getElementById('readerContent');
            const currentSize = parseInt(window.getComputedStyle(content).fontSize);
            const newSize = Math.min(Math.max(currentSize + delta, 14), 24);
            content.style.fontSize = `${newSize}px`;
            document.getElementById('fontSize').textContent = `${newSize}px`;
        }

        function toggleDarkMode() {
            alert('Темная тема будет доступна позже');
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('readerSidebar');
            const isVisible = sidebar.style.transform !== 'translateX(-100%)';
            sidebar.style.transform = isVisible ? 'translateX(-100%)' : '';
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const category = this.dataset.category;
                    loadBooks(category);
                });
            });

            document.querySelectorAll('.reader-nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.reader-nav-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    const section = this.dataset.section;
                    if (section !== 'reading') {
                        const book = bookTexts[currentBookId];
                        if (book && book.materials && book.materials[section]) {
                            document.getElementById('materialsContent').innerHTML = book.materials[section];
                            document.getElementById('materialsModal').classList.add('active');
                        }
                    } else {
                        closeMaterials();
                    }
                });
            });

            ['guestBtn', 'startFreeBtn', 'startFreeBtn2', 'ctaBtn'].forEach(id => {
                document.getElementById(id).onclick = () => showPage('accountPage');
            });

            document.getElementById('buyPremiumBtn').onclick = () => {
                showPage('mainPage');
                setTimeout(() => {
                    document.getElementById('pricing').scrollIntoView({ behavior: 'smooth' });
                }, 100);
            };

            loadBooks('all');
        });

        // Утилиты для прокрутки
        function scrollToSection(sectionId) {
            const el = document.getElementById(sectionId);
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
